services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  # Auto-register all classes in Classes/ directory
  Hn\MailSender\:
    resource: '../Classes/*'
    exclude: '../Classes/Domain/Model/*'

  # Autoconfigure validators with tag
  _instanceof:
    Hn\MailSender\Validation\SenderAddressValidatorInterface:
      tags: ['mail_sender.validator']

  # Validation Service with tagged iterator
  Hn\MailSender\Service\ValidationService:
    public: true
    arguments:
      $validators: !tagged_iterator mail_sender.validator
      $emlParserService: '@Hn\MailSender\Service\EmlParserService'

  # Backend Module Controller
  Hn\MailSender\Controller\MailSenderController:
    public: true

  # Console Command
  Hn\MailSender\Command\ValidateSenderCommand:
    tags:
      - name: 'console.command'
        command: 'mail:sender:validate'
        description: 'Validate email sender addresses'

  # Scheduler Task
  Hn\MailSender\Task\ValidateSenderAddressesTask:
    tags:
      - name: 'scheduler.task'
        title: 'Mail Sender: Validate All Addresses'
        description: 'Validates all configured sender email addresses and updates their status'

  # Status Report Provider
  Hn\MailSender\Report\MailSenderStatusProvider:
    tags:
      - name: 'reports.status'
